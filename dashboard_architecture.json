{
  "project": {
    "name": "Furniture Analytics Dashboard",
    "type": "Web Dashboard Application",
    "version": "3.0",
    "description": "Веб-дашборд для комплексной аналитики мебельной компании: эффективность рекламных кампаний VK Ads, продажи на Yandex Market и интеграция с номенклатурой из 1C",
    "status": "В разработке (Backend готов, требуется Frontend)",
    "last_update": "2025-11-12",
    "target_audience": "Менеджеры по продажам, маркетологи, руководство мебельной компании"
  },
  
  "business_goals": {
    "primary": [
      "Отслеживать эффективность рекламных кампаний VK Ads",
      "Анализировать продажи на маркетплейсе Yandex Market",
      "Связывать рекламные расходы с реальными продажами",
      "Оптимизировать маркетинговый бюджет",
      "Контролировать остатки и цены товаров"
    ],
    "secondary": [
      "Анализировать эффективность товарных категорий",
      "Мониторить отзывы покупателей",
      "Отслеживать географию продаж и рекламы",
      "Сравнивать планы из 1C с реальными продажами"
    ]
  },
  
  "key_metrics": {
    "marketing": [
      {
        "name": "ROAS",
        "description": "Return on Ad Spend - окупаемость рекламных расходов",
        "formula": "Revenue / Ad Spend",
        "target": "> 3.0"
      },
      {
        "name": "CAC",
        "description": "Customer Acquisition Cost - стоимость привлечения покупателя",
        "formula": "Ad Spend / New Customers",
        "target": "< 1000 руб"
      },
      {
        "name": "CTR",
        "description": "Click-Through Rate - кликабельность рекламы",
        "formula": "Clicks / Shows * 100%",
        "target": "> 2%"
      },
      {
        "name": "CPC",
        "description": "Cost Per Click - цена за клик",
        "formula": "Ad Spend / Clicks",
        "target": "< 50 руб"
      },
      {
        "name": "Conversion Rate",
        "description": "Конверсия из кликов в заказы",
        "formula": "Orders / Clicks * 100%",
        "target": "> 1%"
      }
    ],
    "sales": [
      {
        "name": "Total Revenue",
        "description": "Общая выручка",
        "formula": "SUM(order_amounts)",
        "period": "Месяц/Квартал/Год"
      },
      {
        "name": "AOV",
        "description": "Average Order Value - средний чек",
        "formula": "Revenue / Orders",
        "target": "> 15000 руб"
      },
      {
        "name": "Items per Order",
        "description": "Среднее количество товаров в заказе",
        "formula": "Total Items / Orders",
        "target": "> 1.5"
      },
      {
        "name": "Delivery Rate",
        "description": "Процент доставленных заказов",
        "formula": "Delivered / Total Orders * 100%",
        "target": "> 95%"
      },
      {
        "name": "Return Rate",
        "description": "Процент возвратов",
        "formula": "Returns / Delivered * 100%",
        "target": "< 5%"
      }
    ],
    "inventory": [
      {
        "name": "Stock Coverage",
        "description": "Покрытие запасов (дней)",
        "formula": "Current Stock / Avg Daily Sales",
        "target": "30-60 дней"
      },
      {
        "name": "Out of Stock Rate",
        "description": "Процент товаров без остатков",
        "formula": "Out of Stock Items / Total Items * 100%",
        "target": "< 5%"
      }
    ]
  },
  
  "architecture": {
    "type": "Web Application (3-tier)",
    "components": {
      "frontend": {
        "status": "❌ Требуется разработка",
        "technology_stack": [
          "React.js / Vue.js / Next.js (рекомендуется)",
          "Chart.js / D3.js / Recharts для визуализации",
          "Tailwind CSS / Material-UI для дизайна",
          "Axios для API запросов"
        ],
        "pages": [
          {
            "name": "Dashboard (Главная)",
            "components": ["KPI Cards", "Revenue Chart", "ROAS Chart", "Quick Stats"]
          },
          {
            "name": "Marketing Analytics",
            "components": ["Campaigns Table", "Ad Performance", "Demographics", "Geography"]
          },
          {
            "name": "Sales Analytics",
            "components": ["Orders Table", "Products Performance", "Revenue Trends", "Categories Analysis"]
          },
          {
            "name": "Products & Inventory",
            "components": ["Products List", "Stock Levels", "Price Monitor", "Out of Stock Alerts"]
          },
          {
            "name": "Reports",
            "components": ["Custom Reports", "Export Data", "Period Comparison"]
          },
          {
            "name": "1C Upload",
            "components": ["File Upload", "Nomenclature Mapping", "Import History"]
          },
          {
            "name": "Settings",
            "components": ["API Tokens", "Data Sync Schedule", "User Preferences"]
          }
        ]
      },
      "backend": {
        "status": "✅ Частично готов",
        "technology_stack": [
          "Python 3.7+",
          "Flask / FastAPI (рекомендуется) для REST API",
          "SQLAlchemy для ORM",
          "PostgreSQL / MySQL для БД",
          "Celery для асинхронных задач",
          "Redis для кэширования"
        ],
        "existing_modules": [
          {
            "name": "core/yandex_market_api.py",
            "status": "✅ Готов",
            "description": "Класс для работы с Yandex Market API"
          },
          {
            "name": "core/vk_ads_api_v2.py",
            "status": "✅ Готов",
            "description": "Класс для работы с VK Ads API v2"
          },
          {
            "name": "core/data_exporter.py",
            "status": "✅ Готов",
            "description": "Экспорт данных в JSON/CSV/Excel"
          }
        ],
        "required_modules": [
          {
            "name": "api/routes.py",
            "status": "❌ Требуется",
            "description": "REST API endpoints для frontend"
          },
          {
            "name": "database/models.py",
            "status": "❌ Требуется",
            "description": "Модели базы данных (Orders, Products, Campaigns, etc.)"
          },
          {
            "name": "services/data_processor.py",
            "status": "❌ Требуется",
            "description": "Обработка и агрегация данных"
          },
          {
            "name": "services/analytics.py",
            "status": "❌ Требуется",
            "description": "Вычисление метрик и аналитики"
          },
          {
            "name": "services/file_upload.py",
            "status": "❌ Требуется",
            "description": "Обработка загрузки файлов из 1C"
          },
          {
            "name": "tasks/data_sync.py",
            "status": "❌ Требуется",
            "description": "Периодическая синхронизация данных с API"
          }
        ]
      },
      "database": {
        "status": "❌ Требуется создание",
        "technology": "PostgreSQL (рекомендуется) или MySQL",
        "tables": [
          "yandex_campaigns",
          "yandex_products",
          "yandex_orders",
          "yandex_order_items",
          "yandex_prices",
          "yandex_stocks",
          "yandex_feedbacks",
          "vk_ad_plans",
          "vk_campaigns",
          "vk_ad_groups",
          "vk_ads",
          "vk_statistics",
          "c1_nomenclature",
          "users",
          "sync_history"
        ]
      }
    }
  },
  
  "data_sources": {
    "yandex_market_api": {
      "base_url": "https://api.partner.market.yandex.ru",
      "api_version": "v2",
      "authentication": {
        "type": "API Key",
        "header_format": "Api-Key: {YANDEX_OAUTH_TOKEN}",
        "current_token": "ACMA:MukyCiS4d6yMaOjDKWDJffZewiixE2SkAP8IKFdJ:31f52c26",
        "campaign_id": "21621656"
      },
      "endpoints_in_use": [
        {
          "name": "Campaigns",
          "path": "/campaigns",
          "purpose": "Список магазинов компании",
          "update_frequency": "1 раз в день"
        },
        {
          "name": "Products (Offers)",
          "path": "/campaigns/{id}/offers",
          "purpose": "Номенклатура товаров на маркетплейсе",
          "update_frequency": "Каждые 4 часа"
        },
        {
          "name": "Orders",
          "path": "/campaigns/{id}/orders",
          "purpose": "Заказы покупателей (все статусы)",
          "update_frequency": "Каждый час"
        },
        {
          "name": "Prices",
          "path": "/campaigns/{id}/offer-prices",
          "purpose": "Актуальные цены товаров",
          "update_frequency": "Каждые 4 часа"
        },
        {
          "name": "Stocks",
          "path": "/campaigns/{id}/offers/stocks",
          "purpose": "Остатки товаров на складах",
          "update_frequency": "Каждые 4 часа"
        },
        {
          "name": "Feedbacks",
          "path": "/campaigns/{id}/feedback",
          "purpose": "Отзывы покупателей",
          "update_frequency": "1 раз в день"
        },
        {
          "name": "Returns",
          "path": "/campaigns/{id}/returns",
          "purpose": "Возвраты товаров",
          "update_frequency": "1 раз в день"
        },
        {
          "name": "Order Statistics",
          "path": "/campaigns/{id}/stats/orders",
          "purpose": "Агрегированная статистика продаж",
          "update_frequency": "1 раз в день"
        }
      ],
      "data_structure": {
        "orders": {
          "key_fields": [
            "id",
            "status",
            "creationDate",
            "itemsTotal",
            "total",
            "deliveryCost",
            "items[].offerId",
            "items[].offerName",
            "items[].price",
            "items[].count",
            "delivery.region"
          ]
        },
        "products": {
          "key_fields": [
            "offerId",
            "name",
            "category",
            "vendor",
            "price",
            "availability",
            "stocks"
          ]
        }
      }
    },
    
    "vk_ads_api": {
      "base_url": "https://ads.vk.com/api/v2",
      "api_version": "v2",
      "authentication": {
        "type": "OAuth2 Bearer Token",
        "header_format": "Bearer {VK_ACCESS_TOKEN}",
        "current_token": "6kNLB8xON9Bdg5Ft4I7izBGHwGnn0lmO...",
        "token_lifetime": "24 hours",
        "account_id": "8798776",
        "oauth_credentials": {
          "client_id": "b9AHG7669xtg1nvq",
          "client_secret": "xzq3ChdU2N9ehhzHibhth8vY2bwNjvy..."
        }
      },
      "endpoints_in_use": [
        {
          "name": "Ad Plans (Accounts)",
          "path": "/ad_plans.json",
          "purpose": "Рекламные кабинеты компании",
          "update_frequency": "1 раз в день"
        },
        {
          "name": "Campaigns",
          "path": "/campaigns.json",
          "purpose": "Список рекламных кампаний",
          "update_frequency": "Каждые 4 часа"
        },
        {
          "name": "Ad Groups",
          "path": "/ad_groups.json",
          "purpose": "Группы объявлений",
          "update_frequency": "Каждые 4 часа"
        },
        {
          "name": "Ads",
          "path": "/ads.json",
          "purpose": "Объявления",
          "update_frequency": "Каждые 4 часа"
        },
        {
          "name": "Statistics",
          "path": "/statistics.json",
          "method": "POST",
          "purpose": "Статистика показов, кликов, расходов",
          "update_frequency": "Каждый час",
          "metrics": [
            "shows",
            "clicks",
            "spent",
            "conversions",
            "ctr",
            "cpc",
            "cpm",
            "uniq_views_count"
          ],
          "dimensions": [
            "date",
            "campaign_id",
            "banner_id",
            "ad_group_id",
            "sex",
            "age",
            "uniq_geo_id"
          ]
        },
        {
          "name": "Campaign Budgets",
          "path": "/campaigns/{id}.json",
          "purpose": "Бюджеты и расходы кампаний",
          "update_frequency": "Каждый час"
        }
      ],
      "data_structure": {
        "campaigns": {
          "key_fields": [
            "id",
            "name",
            "status",
            "budget_limit",
            "budget_limit_day",
            "spent",
            "created_at"
          ]
        },
        "statistics": {
          "key_fields": [
            "date",
            "campaign_id",
            "shows",
            "clicks",
            "spent",
            "conversions",
            "ctr",
            "cpc",
            "cpm"
          ]
        }
      }
    },
    
    "1c_files": {
      "description": "Файлы с номенклатурой и планами из 1C",
      "file_formats": [
        {
          "format": "CSV",
          "encoding": "UTF-8 / Windows-1251",
          "separator": ";" 
        },
        {
          "format": "Excel (XLSX/XLS)",
          "sheets": "multiple"
        }
      ],
      "expected_structure": {
        "nomenclature": {
          "required_columns": [
            "Код товара",
            "Наименование",
            "Артикул",
            "Категория",
            "Базовая цена",
            "Себестоимость"
          ],
          "optional_columns": [
            "Бренд",
            "Коллекция",
            "Размеры",
            "Материал",
            "Цвет"
          ]
        },
        "sales_plan": {
          "required_columns": [
            "Период (месяц)",
            "Код товара / Категория",
            "План продаж (шт)",
            "План выручки (руб)"
          ]
        }
      },
      "mapping": {
        "description": "Связь между товарами в 1C и Yandex Market",
        "key_field": "Артикул → offerId",
        "manual_mapping": "Через интерфейс дашборда"
      }
    }
  },
  
  "database_schema": {
    "yandex_campaigns": {
      "columns": [
        {"name": "id", "type": "BIGINT", "primary_key": true},
        {"name": "domain", "type": "VARCHAR(255)"},
        {"name": "business_id", "type": "BIGINT"},
        {"name": "business_name", "type": "VARCHAR(255)"},
        {"name": "created_at", "type": "TIMESTAMP"},
        {"name": "updated_at", "type": "TIMESTAMP"}
      ]
    },
    "yandex_products": {
      "columns": [
        {"name": "id", "type": "SERIAL", "primary_key": true},
        {"name": "campaign_id", "type": "BIGINT", "foreign_key": "yandex_campaigns.id"},
        {"name": "offer_id", "type": "VARCHAR(255)", "unique": true},
        {"name": "name", "type": "TEXT"},
        {"name": "category", "type": "VARCHAR(255)"},
        {"name": "vendor", "type": "VARCHAR(255)"},
        {"name": "price", "type": "DECIMAL(10,2)"},
        {"name": "availability", "type": "BOOLEAN"},
        {"name": "c1_product_id", "type": "VARCHAR(100)", "foreign_key": "c1_nomenclature.code"},
        {"name": "created_at", "type": "TIMESTAMP"},
        {"name": "updated_at", "type": "TIMESTAMP"}
      ]
    },
    "yandex_orders": {
      "columns": [
        {"name": "id", "type": "BIGINT", "primary_key": true},
        {"name": "campaign_id", "type": "BIGINT", "foreign_key": "yandex_campaigns.id"},
        {"name": "status", "type": "VARCHAR(50)"},
        {"name": "creation_date", "type": "TIMESTAMP"},
        {"name": "items_total", "type": "DECIMAL(10,2)"},
        {"name": "delivery_cost", "type": "DECIMAL(10,2)"},
        {"name": "total", "type": "DECIMAL(10,2)"},
        {"name": "region", "type": "VARCHAR(255)"},
        {"name": "created_at", "type": "TIMESTAMP"},
        {"name": "updated_at", "type": "TIMESTAMP"}
      ]
    },
    "yandex_order_items": {
      "columns": [
        {"name": "id", "type": "SERIAL", "primary_key": true},
        {"name": "order_id", "type": "BIGINT", "foreign_key": "yandex_orders.id"},
        {"name": "product_id", "type": "INTEGER", "foreign_key": "yandex_products.id"},
        {"name": "offer_id", "type": "VARCHAR(255)"},
        {"name": "offer_name", "type": "TEXT"},
        {"name": "price", "type": "DECIMAL(10,2)"},
        {"name": "count", "type": "INTEGER"},
        {"name": "total", "type": "DECIMAL(10,2)"},
        {"name": "created_at", "type": "TIMESTAMP"}
      ]
    },
    "yandex_stocks": {
      "columns": [
        {"name": "id", "type": "SERIAL", "primary_key": true},
        {"name": "product_id", "type": "INTEGER", "foreign_key": "yandex_products.id"},
        {"name": "offer_id", "type": "VARCHAR(255)"},
        {"name": "warehouse_id", "type": "VARCHAR(100)"},
        {"name": "count", "type": "INTEGER"},
        {"name": "updated_at", "type": "TIMESTAMP"}
      ]
    },
    "vk_campaigns": {
      "columns": [
        {"name": "id", "type": "BIGINT", "primary_key": true},
        {"name": "ad_plan_id", "type": "BIGINT", "foreign_key": "vk_ad_plans.id"},
        {"name": "name", "type": "VARCHAR(255)"},
        {"name": "status", "type": "VARCHAR(50)"},
        {"name": "budget_limit", "type": "DECIMAL(10,2)"},
        {"name": "budget_limit_day", "type": "DECIMAL(10,2)"},
        {"name": "spent", "type": "DECIMAL(10,2)"},
        {"name": "created_at", "type": "TIMESTAMP"},
        {"name": "updated_at", "type": "TIMESTAMP"}
      ]
    },
    "vk_statistics": {
      "columns": [
        {"name": "id", "type": "SERIAL", "primary_key": true},
        {"name": "date", "type": "DATE"},
        {"name": "campaign_id", "type": "BIGINT", "foreign_key": "vk_campaigns.id"},
        {"name": "banner_id", "type": "BIGINT"},
        {"name": "shows", "type": "INTEGER"},
        {"name": "clicks", "type": "INTEGER"},
        {"name": "spent", "type": "DECIMAL(10,2)"},
        {"name": "conversions", "type": "INTEGER"},
        {"name": "ctr", "type": "DECIMAL(5,2)"},
        {"name": "cpc", "type": "DECIMAL(10,2)"},
        {"name": "cpm", "type": "DECIMAL(10,2)"},
        {"name": "created_at", "type": "TIMESTAMP"}
      ],
      "indexes": [
        {"columns": ["date", "campaign_id"]},
        {"columns": ["campaign_id"]},
        {"columns": ["date"]}
      ]
    },
    "c1_nomenclature": {
      "columns": [
        {"name": "id", "type": "SERIAL", "primary_key": true},
        {"name": "code", "type": "VARCHAR(100)", "unique": true},
        {"name": "name", "type": "TEXT"},
        {"name": "article", "type": "VARCHAR(255)"},
        {"name": "category", "type": "VARCHAR(255)"},
        {"name": "base_price", "type": "DECIMAL(10,2)"},
        {"name": "cost_price", "type": "DECIMAL(10,2)"},
        {"name": "brand", "type": "VARCHAR(255)"},
        {"name": "collection", "type": "VARCHAR(255)"},
        {"name": "upload_date", "type": "TIMESTAMP"},
        {"name": "created_at", "type": "TIMESTAMP"}
      ]
    },
    "product_mapping": {
      "description": "Связь между товарами из разных систем",
      "columns": [
        {"name": "id", "type": "SERIAL", "primary_key": true},
        {"name": "c1_code", "type": "VARCHAR(100)", "foreign_key": "c1_nomenclature.code"},
        {"name": "yandex_offer_id", "type": "VARCHAR(255)", "foreign_key": "yandex_products.offer_id"},
        {"name": "mapping_type", "type": "VARCHAR(50)", "comment": "auto/manual"},
        {"name": "confidence", "type": "DECIMAL(3,2)", "comment": "0.00-1.00"},
        {"name": "created_at", "type": "TIMESTAMP"}
      ]
    }
  },
  
  "api_endpoints": {
    "description": "REST API для frontend",
    "base_url": "/api/v1",
    "authentication": "JWT Token (для будущего расширения)",
    "endpoints": [
      {
        "path": "/dashboard/summary",
        "method": "GET",
        "description": "Общая сводка для главной страницы",
        "params": ["period"],
        "response": {
          "total_revenue": "number",
          "total_orders": "number",
          "ad_spend": "number",
          "roas": "number",
          "aov": "number",
          "conversion_rate": "number"
        }
      },
      {
        "path": "/dashboard/revenue-chart",
        "method": "GET",
        "description": "Данные для графика выручки",
        "params": ["date_from", "date_to", "group_by"],
        "response": {
          "dates": ["array"],
          "revenue": ["array"],
          "orders": ["array"]
        }
      },
      {
        "path": "/marketing/campaigns",
        "method": "GET",
        "description": "Список рекламных кампаний VK",
        "params": ["status", "limit", "offset"],
        "response": {
          "items": ["array"],
          "total": "number"
        }
      },
      {
        "path": "/marketing/statistics",
        "method": "GET",
        "description": "Статистика рекламных кампаний",
        "params": ["campaign_ids", "date_from", "date_to", "group_by"],
        "response": {
          "statistics": ["array"]
        }
      },
      {
        "path": "/sales/orders",
        "method": "GET",
        "description": "Список заказов Yandex Market",
        "params": ["status", "date_from", "date_to", "limit", "offset"],
        "response": {
          "items": ["array"],
          "total": "number"
        }
      },
      {
        "path": "/sales/products-performance",
        "method": "GET",
        "description": "Эффективность товаров",
        "params": ["date_from", "date_to", "sort_by", "limit"],
        "response": {
          "products": ["array with sales metrics"]
        }
      },
      {
        "path": "/products",
        "method": "GET",
        "description": "Список товаров",
        "params": ["category", "availability", "search", "limit", "offset"],
        "response": {
          "items": ["array"],
          "total": "number"
        }
      },
      {
        "path": "/products/:id",
        "method": "GET",
        "description": "Детальная информация о товаре",
        "response": {
          "product": "object",
          "stocks": "array",
          "price_history": "array",
          "sales_stats": "object"
        }
      },
      {
        "path": "/inventory/stocks",
        "method": "GET",
        "description": "Остатки товаров",
        "params": ["low_stock", "out_of_stock", "warehouse_id"],
        "response": {
          "items": ["array"]
        }
      },
      {
        "path": "/upload/1c-nomenclature",
        "method": "POST",
        "description": "Загрузка номенклатуры из 1C",
        "content_type": "multipart/form-data",
        "params": ["file", "encoding", "separator"],
        "response": {
          "success": "boolean",
          "imported": "number",
          "errors": ["array"]
        }
      },
      {
        "path": "/mapping/products",
        "method": "GET",
        "description": "Получить маппинг товаров 1C ↔ Yandex",
        "response": {
          "mappings": ["array"]
        }
      },
      {
        "path": "/mapping/products",
        "method": "POST",
        "description": "Создать/обновить маппинг товара",
        "body": {
          "c1_code": "string",
          "yandex_offer_id": "string"
        },
        "response": {
          "success": "boolean"
        }
      },
      {
        "path": "/sync/trigger",
        "method": "POST",
        "description": "Запустить синхронизацию данных",
        "body": {
          "source": "yandex|vk|both"
        },
        "response": {
          "task_id": "string",
          "status": "string"
        }
      },
      {
        "path": "/sync/status",
        "method": "GET",
        "description": "Статус последней синхронизации",
        "response": {
          "yandex": "object",
          "vk": "object",
          "last_sync": "timestamp"
        }
      }
    ]
  },
  
  "data_flow": {
    "1_data_collection": {
      "description": "Периодический сбор данных из API",
      "frequency": "По расписанию (cron/Celery)",
      "steps": [
        "Подключение к Yandex Market API",
        "Получение заказов, товаров, цен, остатков",
        "Сохранение в БД",
        "Подключение к VK Ads API",
        "Получение кампаний, статистики",
        "Сохранение в БД",
        "Запись в sync_history"
      ]
    },
    "2_data_processing": {
      "description": "Обработка и агрегация данных",
      "triggers": ["После синхронизации", "По запросу API"],
      "steps": [
        "Связывание заказов с товарами",
        "Связывание товаров с 1C номенклатурой",
        "Расчет метрик (ROAS, AOV, etc.)",
        "Агрегация по периодам",
        "Кэширование результатов"
      ]
    },
    "3_data_presentation": {
      "description": "Отображение данных в веб-интерфейсе",
      "steps": [
        "Frontend запрашивает данные через API",
        "Backend возвращает обработанные данные",
        "Frontend строит графики и таблицы",
        "Пользователь взаимодействует с дашбордом"
      ]
    }
  },
  
  "technology_recommendations": {
    "frontend": {
      "framework": "Next.js (React)",
      "reasons": [
        "SSR для быстрой загрузки",
        "Удобная маршрутизация",
        "Большое сообщество",
        "Готовые UI компоненты"
      ],
      "ui_library": "shadcn/ui или Material-UI",
      "charts": "Recharts (простой) или Apache ECharts (продвинутый)",
      "state_management": "React Context API или Zustand"
    },
    "backend": {
      "framework": "FastAPI",
      "reasons": [
        "Быстрая разработка API",
        "Автоматическая документация (Swagger)",
        "Async/await поддержка",
        "Type hints и валидация (Pydantic)",
        "Совместимость с существующим кодом"
      ],
      "orm": "SQLAlchemy",
      "task_queue": "Celery + Redis",
      "api_docs": "Автоматически через FastAPI"
    },
    "database": {
      "recommended": "PostgreSQL",
      "reasons": [
        "Надежность",
        "JSON поддержка",
        "Полнотекстовый поиск",
        "Хорошая производительность",
        "Бесплатный"
      ],
      "alternative": "MySQL"
    },
    "deployment": {
      "option_1": {
        "name": "VPS/Dedicated Server",
        "components": [
          "Nginx (reverse proxy)",
          "FastAPI (backend)",
          "PostgreSQL (database)",
          "Redis (cache)",
          "PM2/Supervisor (process management)"
        ]
      },
      "option_2": {
        "name": "Docker Compose",
        "benefits": "Простое развертывание и масштабирование"
      },
      "option_3": {
        "name": "Cloud (Azure/AWS)",
        "components": [
          "Azure App Service / AWS Elastic Beanstalk (backend)",
          "Azure Database / RDS (PostgreSQL)",
          "Azure Cache / ElastiCache (Redis)"
        ]
      }
    }
  },
  
  "existing_assets": {
    "core_modules": [
      {
        "file": "core/yandex_market_api.py",
        "status": "✅ Готов к использованию",
        "usage": "Импортировать в backend для синхронизации"
      },
      {
        "file": "core/vk_ads_api_v2.py",
        "status": "✅ Готов к использованию",
        "usage": "Импортировать в backend для синхронизации"
      },
      {
        "file": "core/data_exporter.py",
        "status": "✅ Можно использовать",
        "usage": "Для экспорта отчетов из дашборда"
      }
    ],
    "authentication_scripts": [
      {
        "file": "scripts/get_vk_access_token.py",
        "status": "✅ Работает",
        "usage": "Интегрировать в настройки дашборда"
      },
      {
        "file": "scripts/get_yandex_campaign.py",
        "status": "✅ Работает",
        "usage": "Интегрировать в настройки дашборда"
      }
    ],
    "data_collection_scripts": [
      {
        "file": "scripts/collect_yandex_data.py",
        "status": "✅ Работает",
        "usage": "Адаптировать для работы с БД вместо файлов"
      },
      {
        "file": "scripts/collect_vk_data_v2.py",
        "status": "✅ Работает",
        "usage": "Адаптировать для работы с БД вместо файлов"
      }
    ],
    "configuration": [
      {
        "file": "config.py",
        "status": "✅ Актуален",
        "usage": "Использовать токены для backend"
      }
    ]
  },
  
  "development_roadmap": {
    "phase_1": {
      "name": "Backend API + Database",
      "duration": "2-3 недели",
      "tasks": [
        "Создать структуру БД (PostgreSQL)",
        "Настроить FastAPI проект",
        "Создать модели SQLAlchemy",
        "Адаптировать существующие классы API для работы с БД",
        "Создать REST API endpoints",
        "Настроить Celery для периодической синхронизации",
        "Написать тесты для API"
      ]
    },
    "phase_2": {
      "name": "Frontend (Основа)",
      "duration": "3-4 недели",
      "tasks": [
        "Настроить Next.js проект",
        "Создать layout и навигацию",
        "Реализовать главную страницу (Dashboard)",
        "Реализовать страницу Marketing Analytics",
        "Реализовать страницу Sales Analytics",
        "Подключить API через Axios",
        "Добавить графики (Recharts/ECharts)"
      ]
    },
    "phase_3": {
      "name": "Продвинутые функции",
      "duration": "2-3 недели",
      "tasks": [
        "Загрузка файлов из 1C",
        "Маппинг товаров 1C ↔ Yandex",
        "Страница Products & Inventory",
        "Страница Reports с экспортом",
        "Настройки и управление токенами",
        "Уведомления и алерты"
      ]
    },
    "phase_4": {
      "name": "Деплой и оптимизация",
      "duration": "1-2 недели",
      "tasks": [
        "Настроить Docker",
        "Развернуть на сервере/облаке",
        "Настроить автоматическую синхронизацию",
        "Оптимизация производительности",
        "Тестирование и отладка",
        "Документация для пользователей"
      ]
    }
  },
  
  "security_considerations": {
    "api_tokens": {
      "storage": "Переменные окружения (.env)",
      "access": "Только backend",
      "rotation": "Автоматическое обновление VK токена"
    },
    "database": {
      "access": "Только localhost или VPN",
      "backups": "Ежедневные автоматические",
      "encryption": "SSL/TLS для соединений"
    },
    "web_access": {
      "authentication": "Опционально: Basic Auth или JWT",
      "https": "Обязательно для production",
      "cors": "Настроить для frontend домена"
    }
  },
  
  "monitoring_and_maintenance": {
    "data_sync": {
      "schedule": {
        "yandex_orders": "Каждый час",
        "yandex_products": "Каждые 4 часа",
        "vk_statistics": "Каждый час",
        "vk_campaigns": "Каждые 4 часа"
      },
      "error_handling": "Логирование в файл + email уведомления",
      "retry_logic": "3 попытки с экспоненциальной задержкой"
    },
    "performance": {
      "database_indexes": "На часто запрашиваемые поля",
      "query_optimization": "EXPLAIN ANALYZE для сложных запросов",
      "caching": "Redis для часто запрашиваемых данных",
      "api_response_time": "< 500ms для большинства запросов"
    },
    "logging": {
      "application_logs": "DEBUG/INFO/ERROR уровни",
      "api_requests": "Все запросы с временем выполнения",
      "sync_logs": "Результаты каждой синхронизации",
      "error_logs": "С полным stack trace"
    }
  }
}
