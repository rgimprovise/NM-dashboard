# ğŸ“Š ĞŸĞĞ›ĞĞĞ¯ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ”ĞĞ¨Ğ‘ĞĞ Ğ”Ğ

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 2.0  
**Ğ”Ğ°Ñ‚Ğ°:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025  
**ĞŸÑ€Ğ¾ĞµĞºÑ‚:** NM Dashboard - ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ Ğ´Ğ»Ñ Ğ¼ĞµĞ±ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸

---

## ğŸ“‘ Ğ¡ĞĞ”Ğ•Ğ Ğ–ĞĞĞ˜Ğ•

1. [ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸](#1-Ğ¾Ğ±Ñ‰Ğ°Ñ-ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸)
2. [Ğ Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ API](#2-Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³-Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸-api)
3. [Ğ Ğ°ÑÑ‡ĞµÑ‚Ñ‹ Ğ¸ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹](#3-Ñ€Ğ°ÑÑ‡ĞµÑ‚Ñ‹-Ğ¸-Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹)
4. [Ğ ÑƒÑ‡Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²](#4-Ñ€ÑƒÑ‡Ğ½Ğ°Ñ-Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)
5. [ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ API Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#5-Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ-api-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
6. [Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°Ğ¼](#6-Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…-Ğ¿Ğ¾-Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°Ğ¼)
7. [ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#7-Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°-Ğ½Ğ°-Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
8. [Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°](#8-Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ-Ğ¸-Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°)

---

## 1. ĞĞ‘Ğ©ĞĞ¯ Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞĞ Ğ“ĞĞĞ˜Ğ—ĞĞ¦Ğ˜Ğ˜

### 1.1 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND (React)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Dashboard   â”‚  â”‚  Marketing   â”‚  â”‚    Sales    â”‚     â”‚
â”‚  â”‚   Page       â”‚  â”‚    Page      â”‚  â”‚    Page     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                 â”‚                 â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â”‚                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                   â”‚ DataService â”‚                          â”‚
â”‚                   â”‚  (client/   â”‚                          â”‚
â”‚                   â”‚  services/  â”‚                          â”‚
â”‚                   â”‚dataService) â”‚                          â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTP Requests
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Express.js)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              server/index.ts                       â”‚   â”‚
â”‚  â”‚  - Express app initialization                      â”‚   â”‚
â”‚  â”‚  - Middleware (CORS, JSON parsing)                â”‚   â”‚
â”‚  â”‚  - Route registration                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Yandex Routes   â”‚         â”‚    VK Routes     â”‚        â”‚
â”‚  â”‚  (yandex.ts)     â”‚         â”‚    (vk.ts)       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â”‚                            â”‚                   â”‚
â”‚           â–¼                            â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Yandex Market   â”‚         â”‚     VK Ads       â”‚        â”‚
â”‚  â”‚      API v2      â”‚         â”‚      API v2      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Cache Manager (cacheManager.ts)           â”‚   â”‚
â”‚  â”‚  - In-memory cache Ñ TTL                            â”‚   â”‚
â”‚  â”‚  - Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ĞºĞ»ÑÑ‡Ğ°Ğ¼                           â”‚   â”‚
â”‚  â”‚  - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ°                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      VK Token Manager (vkTokenManager.ts)           â”‚   â”‚
â”‚  â”‚  - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²                â”‚   â”‚
â”‚  â”‚  - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ€Ğ¾ĞºĞ° Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ                          â”‚   â”‚
â”‚  â”‚  - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² .env                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¹

```
vortex-home 2/
â”œâ”€â”€ client/                    # Frontend (React + TypeScript)
â”‚   â”œâ”€â”€ pages/                # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx     # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ°
â”‚   â”‚   â”œâ”€â”€ Marketing.tsx     # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¼Ğ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³Ğ°
â”‚   â”‚   â”œâ”€â”€ Sales.tsx         # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶
â”‚   â”‚   â””â”€â”€ Upload1C.tsx      # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² 1C
â”‚   â”œâ”€â”€ services/              # Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
â”‚   â”‚   â”œâ”€â”€ dataService.ts    # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ yandexClient.ts  # ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Yandex API
â”‚   â”‚   â”‚   â””â”€â”€ vkClient.ts      # ĞšĞ»Ğ¸ĞµĞ½Ñ‚ VK API
â”‚   â”‚   â””â”€â”€ excelParser.ts    # ĞŸĞ°Ñ€ÑĞµÑ€ Excel Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
â”‚   â”œâ”€â”€ components/           # React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â””â”€â”€ types/               # TypeScript Ñ‚Ğ¸Ğ¿Ñ‹
â”‚
â”œâ”€â”€ server/                    # Backend (Express.js)
â”‚   â”œâ”€â”€ index.ts             # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°
â”‚   â”œâ”€â”€ routes/              # API Ñ€Ğ¾ÑƒÑ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ yandex.ts        # Ğ Ğ¾ÑƒÑ‚Ñ‹ Yandex API
â”‚   â”‚   â”œâ”€â”€ vk.ts            # Ğ Ğ¾ÑƒÑ‚Ñ‹ VK API
â”‚   â”‚   â””â”€â”€ demo.ts          # Ğ”ĞµĞ¼Ğ¾ Ñ€Ğ¾ÑƒÑ‚Ñ‹
â”‚   â”œâ”€â”€ cache/               # ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â”‚   â”‚   â””â”€â”€ cacheManager.ts  # ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ĞºÑÑˆĞ°
â”‚   â””â”€â”€ utils/               # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚       â””â”€â”€ vkTokenManager.ts # ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² VK
â”‚
â””â”€â”€ shared/                   # ĞĞ±Ñ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´
```

---

## 2. Ğ ĞĞ£Ğ¢Ğ˜ĞĞ“ Ğ˜ĞĞ¤ĞĞ ĞœĞĞ¦Ğ˜Ğ˜ API

### 2.1 ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ñ‚ API Ğº UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Yandex Market  â”‚
â”‚      API v2     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ HTTPS Request
         â”‚ GET /campaigns/{id}/orders
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  server/routes/yandex.ts            â”‚
â”‚  - getOrders()                      â”‚
â”‚  - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºÑÑˆĞ°                    â”‚
â”‚  - Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº API (ĞµÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ² ĞºÑÑˆĞµ)   â”‚
â”‚  - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² ĞºÑÑˆ                 â”‚
â”‚  - Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ JSON Response
         â”‚ { success: true, data: [...] }
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  client/services/api/yandexClient.tsâ”‚
â”‚  - getOrders(dateFrom, dateTo)      â”‚
â”‚  - HTTP fetch Ğº /api/yandex/orders   â”‚
â”‚  - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Promise<Order[]>
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  client/services/dataService.ts     â”‚
â”‚  - getDashboardSummary(period)      â”‚
â”‚  - getOrders(period)                â”‚
â”‚  - ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ°ÑÑ‡ĞµÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Processed Data
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  client/pages/Dashboard.tsx         â”‚
â”‚  - useEffect Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…         â”‚
â”‚  - ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² UI                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 API Endpoints

#### Yandex Market API

| Endpoint | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑÑˆ TTL |
|----------|-------|----------|---------|
| `/api/yandex/campaigns` | GET | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ | 60 Ğ¼Ğ¸Ğ½ |
| `/api/yandex/orders` | GET | Ğ—Ğ°ĞºĞ°Ğ·Ñ‹ (Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹) | 5 Ğ¼Ğ¸Ğ½ |
| `/api/yandex/products` | GET | Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ | 30 Ğ¼Ğ¸Ğ½ |
| `/api/yandex/stocks` | GET | ĞÑÑ‚Ğ°Ñ‚ĞºĞ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² | 15 Ğ¼Ğ¸Ğ½ |
| `/api/yandex/stats/orders` | GET | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² | 5 Ğ¼Ğ¸Ğ½ |

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²:**
- `date_from` (YYYY-MM-DD) - Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°
- `date_to` (YYYY-MM-DD) - ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°
- `page` - Ğ½Ğ¾Ğ¼ĞµÑ€ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ (Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸)
- `pageSize` - Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ (Ğ¼Ğ°ĞºÑ 50)

#### VK Ads API

| Endpoint | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑÑˆ TTL |
|----------|-------|----------|---------|
| `/api/vk/ad-plans` | GET | Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ñ‹Ğµ Ğ¿Ğ»Ğ°Ğ½Ñ‹ | 30 Ğ¼Ğ¸Ğ½ |
| `/api/vk/campaigns` | GET | ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ | 15 Ğ¼Ğ¸Ğ½ |
| `/api/vk/ad-groups` | GET | Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ğ¹ | 15 Ğ¼Ğ¸Ğ½ |
| `/api/vk/banners` | GET | Ğ‘Ğ°Ğ½Ğ½ĞµÑ€Ñ‹ | 15 Ğ¼Ğ¸Ğ½ |
| `/api/vk/statistics` | GET/POST | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° | 10 Ğ¼Ğ¸Ğ½ |

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²:**
- `date_from` (YYYY-MM-DD) - Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°
- `date_to` (YYYY-MM-DD) - ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°
- `ad_plan_id` - ID Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ»Ğ°Ğ½Ğ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- `campaign_id` - ID ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

### 2.3 ĞšĞ»ÑÑ‡Ğ¸ ĞºÑÑˆĞ° (Ğ´Ğ»Ñ Ğ´ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸)

ĞšĞ»ÑÑ‡Ğ¸ ĞºÑÑˆĞ° Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ñ ÑƒÑ‡ĞµÑ‚Ğ¾Ğ¼ **Ğ²ÑĞµÑ… Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²**, Ğ²Ğ»Ğ¸ÑÑÑ‰Ğ¸Ñ… Ğ½Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:

```typescript
// Yandex Orders
`yandex:orders:all:${date_from}:${date_to}`

// Yandex Products
`yandex:products:all`

// Yandex Campaigns
`yandex:campaigns:all`

// VK Campaigns
`vk:campaigns:${ad_plan_id || 'all'}`

// VK Statistics
`vk:stats:${date_from}:${date_to}`

// VK Ad Groups
`vk:adgroups:${campaign_id || 'all'}`

// VK Banners
`vk:banners:${campaign_id || 'all'}:${ad_group_id || 'all'}`
```

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** ĞšĞ»ÑÑ‡Ğ¸ Ğ²ĞºĞ»ÑÑ‡Ğ°ÑÑ‚ Ğ²ÑĞµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ±ĞµĞ¶Ğ°Ñ‚ÑŒ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ñ….

---

## 3. Ğ ĞĞ¡Ğ§Ğ•Ğ¢Ğ« Ğ˜ Ğ¤ĞĞ ĞœĞ£Ğ›Ğ«

### 3.1 ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

#### ĞœĞ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

**ROAS (Return on Ad Spend)**
```
ROAS = Total Revenue / Ad Spend

Ğ“Ğ´Ğµ:
- Total Revenue = ÑÑƒĞ¼Ğ¼Ğ° Ğ²ÑĞµÑ… Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ğ·Ğ° Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´
- Ad Spend = ÑÑƒĞ¼Ğ¼Ğ° Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ² Ğ½Ğ° Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ VK Ğ·Ğ° Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Revenue = 1,000,000â‚½, Ad Spend = 200,000â‚½
ROAS = 1,000,000 / 200,000 = 5.0
```

**CTR (Click-Through Rate)**
```
CTR = (Total Clicks / Total Shows) Ã— 100%

Ğ“Ğ´Ğµ:
- Total Clicks = Ğ¾Ğ±Ñ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ»Ğ¸ĞºĞ¾Ğ²
- Total Shows = Ğ¾Ğ±Ñ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ¾Ğ²

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Clicks = 1,000, Shows = 50,000
CTR = (1,000 / 50,000) Ã— 100% = 2%
```

**CPC (Cost Per Click)**
```
CPC = Ad Spend / Total Clicks

Ğ“Ğ´Ğµ:
- Ad Spend = Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ½Ğ° Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ
- Total Clicks = ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ»Ğ¸ĞºĞ¾Ğ²

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ad Spend = 50,000â‚½, Clicks = 1,000
CPC = 50,000 / 1,000 = 50â‚½
```

**CPM (Cost Per Mille)**
```
CPM = (Ad Spend / Total Shows) Ã— 1,000

Ğ“Ğ´Ğµ:
- Ad Spend = Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ½Ğ° Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ
- Total Shows = ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ¾Ğ²

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ad Spend = 100,000â‚½, Shows = 500,000
CPM = (100,000 / 500,000) Ã— 1,000 = 200â‚½
```

**Conversion Rate (ĞšĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ñ)**
```
Conversion Rate = (Total Orders / Total Clicks) Ã— 100%

Ğ“Ğ´Ğµ:
- Total Orders = ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
- Total Clicks = ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ»Ğ¸ĞºĞ¾Ğ²

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Orders = 50, Clicks = 1,000
Conversion Rate = (50 / 1,000) Ã— 100% = 5%
```

#### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶

**AOV (Average Order Value) - Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ‡ĞµĞº**
```
AOV = Total Revenue / Total Orders

Ğ“Ğ´Ğµ:
- Total Revenue = Ğ¾Ğ±Ñ‰Ğ°Ñ Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ°
- Total Orders = ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Revenue = 1,000,000â‚½, Orders = 100
AOV = 1,000,000 / 100 = 10,000â‚½
```

**Revenue Share (Ğ”Ğ¾Ğ»Ñ Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ¸)**
```
Revenue Share = (Product Revenue / Total Revenue) Ã— 100%

Ğ“Ğ´Ğµ:
- Product Revenue = Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ° Ğ¿Ğ¾ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¼Ñƒ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñƒ
- Total Revenue = Ğ¾Ğ±Ñ‰Ğ°Ñ Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ°

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Product Revenue = 200,000â‚½, Total Revenue = 1,000,000â‚½
Revenue Share = (200,000 / 1,000,000) Ã— 100% = 20%
```

**Average Price (Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ†ĞµĞ½Ğ°)**
```
Average Price = Product Revenue / Total Quantity

Ğ“Ğ´Ğµ:
- Product Revenue = Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ° Ğ¿Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñƒ
- Total Quantity = Ğ¾Ğ±Ñ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ĞµĞ´Ğ¸Ğ½Ğ¸Ñ†

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Revenue = 500,000â‚½, Quantity = 50
Average Price = 500,000 / 50 = 10,000â‚½
```

### 3.2 Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ¾Ğ² Ğ² ĞºĞ¾Ğ´Ğµ

**Ğ¤Ğ°Ğ¹Ğ»:** `client/services/dataService.ts`

```typescript
// Ğ Ğ°ÑÑ‡ĞµÑ‚ ROAS
const roas = adSpend > 0 ? totalRevenue / adSpend : 0;

// Ğ Ğ°ÑÑ‡ĞµÑ‚ CTR
const ctr = totalShows > 0 ? (totalClicks / totalShows) * 100 : 0;

// Ğ Ğ°ÑÑ‡ĞµÑ‚ CPC
const cpc = totalClicks > 0 ? adSpend / totalClicks : 0;

// Ğ Ğ°ÑÑ‡ĞµÑ‚ Conversion Rate
const conversionRate = totalClicks > 0 
  ? (totalOrders / totalClicks) * 100 
  : 0;

// Ğ Ğ°ÑÑ‡ĞµÑ‚ AOV
const aov = totalOrders > 0 ? totalRevenue / totalOrders : 0;
```

### 3.3 ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼

**Ğ¤Ğ°Ğ¹Ğ»:** `client/services/dataService.ts` â†’ `getTopProducts()`

```typescript
// Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ¿Ğ¾ offerId
const productStats: Record<string, {
  name: string;
  category: string;
  orders: number;
  quantity: number;
  revenue: number;
}> = {};

// ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
orders.forEach((order) => {
  order.items.forEach((item) => {
    const offerId = item.offerId;
    
    if (!productStats[offerId]) {
      productStats[offerId] = {
        name: item.offerName || offerId,
        category: product?.category || "Ğ‘ĞµĞ· ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸",
        orders: 0,
        quantity: 0,
        revenue: 0,
      };
    }
    
    // ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ
    productStats[offerId].orders += 1;
    productStats[offerId].quantity += item.count || 1;
    productStats[offerId].revenue += (item.buyerPrice || 0) * (item.count || 1);
  });
});

// Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ´Ğ¾Ğ»Ğ¸ Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ¸
const totalRevenue = Object.values(productStats).reduce(
  (sum, p) => sum + p.revenue, 0
);

const topProducts = Object.entries(productStats).map(([offerId, stats]) => ({
  offer_id: offerId,
  revenue: stats.revenue,
  share: totalRevenue > 0 ? (stats.revenue / totalRevenue) * 100 : 0,
  avg_price: stats.quantity > 0 ? stats.revenue / stats.quantity : 0,
}));
```

---

## 4. Ğ Ğ£Ğ§ĞĞĞ¯ Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ Ğ¤ĞĞ™Ğ›ĞĞ’

### 4.1 ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² 1C

**Ğ¤Ğ°Ğ¹Ğ»:** `client/pages/Upload1C.tsx`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»      â”‚
â”‚     (CSV, XLSX, XLS)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ExcelParser.getSheetNames()     â”‚
â”‚     - ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¿Ğ¸ÑĞºĞ° Ğ»Ğ¸ÑÑ‚Ğ¾Ğ²       â”‚
â”‚     - Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¸ÑÑ‚Ğ°         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. ExcelParser.getColumns()        â”‚
â”‚     - Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¾Ğ²         â”‚
â”‚     - ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ExcelParser.parseFile()         â”‚
â”‚     - ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…                â”‚
â”‚     - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ĞµĞ¹               â”‚
â”‚     - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Preview (ĞŸÑ€ĞµĞ´Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€)           â”‚
â”‚     - ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ñ€Ğ°ÑĞ¿Ğ°Ñ€ÑĞµĞ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…â”‚
â”‚     - ĞŸĞ¾ĞºĞ°Ğ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. Import (Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚)                 â”‚
â”‚     - ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ½Ğ° backend            â”‚
â”‚     - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”               â”‚
â”‚     - ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¾Ğº   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ° 1C

**ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ:**
- `code` (ĞÑ€Ñ‚Ğ¸ĞºÑƒĞ») - ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
- `name` (ĞĞ°Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ) - Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°

**ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ:**
- `article` - Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»
- `category` - ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ
- `base_price` - Ñ€Ğ¾Ğ·Ğ½Ğ¸Ñ‡Ğ½Ğ°Ñ Ñ†ĞµĞ½Ğ°
- `cost_price` - ÑĞµĞ±ĞµÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
- `brand` - Ğ±Ñ€ĞµĞ½Ğ´
- `collection` - ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ

### 4.3 ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº

**Ğ¤Ğ°Ğ¹Ğ»:** `client/pages/Upload1C.tsx`

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¿Ğ¾Ğ»ÑĞ¼ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹:

```typescript
interface ColumnMapping {
  code: string;        // "ĞÑ€Ñ‚Ğ¸ĞºÑƒĞ»"
  name: string;        // "ĞĞ°Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"
  article?: string;    // "ĞÑ€Ñ‚Ğ¸ĞºÑƒĞ»"
  category?: string;   // "ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ"
  base_price?: string; // "Ğ Ğ¾Ğ·Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ†ĞµĞ½Ñ‹"
  cost_price?: string; // "Ğ¡ĞµĞ±ĞµÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ"
  brand?: string;      // "Ğ‘Ñ€ĞµĞ½Ğ´"
  collection?: string; // "ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ"
}
```

### 4.4 Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

**Ğ¤Ğ°Ğ¹Ğ»:** `client/services/excelParser.ts`

```typescript
// Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹
if (!code) {
  errors.push({
    row: actualRowIndex,
    field: "code",
    error: "Code is required",
  });
  return;
}

// Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹
const parsed = parseFloat(price.toString().replace(",", "."));
if (isNaN(parsed)) {
  errors.push({
    row: actualRowIndex,
    field: "base_price",
    error: "Invalid number format",
  });
  return;
}
```

**Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°:**
```typescript
{
  total_rows: number;    // Ğ’ÑĞµĞ³Ğ¾ ÑÑ‚Ñ€Ğ¾Ğº Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ
  processed: number;      // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾
  created: number;       // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹
  errors: number;        // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
}
```

### 4.5 Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¾Ğº

**Ğ¤Ğ°Ğ¹Ğ»:** `client/pages/Upload1C.tsx`

ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸:

```typescript
interface UploadResult {
  id: number;
  filename: string;
  uploaded_at: string;      // ISO timestamp
  user: string;             // Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
  status: "success" | "error" | "partial";
  total_rows: number;
  imported: number;         // Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾
  updated: number;         // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ…
  errors: number;          // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
  errors_log?: Array<{     // Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
    row: number;
    field: string;
    error: string;
  }>;
}
```

---

## 5. ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ• API Ğ”ĞĞĞĞ«Ğ¥

### 5.1 Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑÑ‚ÑÑ **Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ**, Ğ° Ğ½Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸.

#### Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ:

1. **ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹**
   - React `useEffect` Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¼Ğ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°
   - Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº API Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾ Ñ‡ĞµÑ€ĞµĞ· `Promise.all()`

2. **ĞŸÑ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°**
   - ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ (7Ğ´, 30Ğ´, 90Ğ´, YTD)
   - `useEffect` Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒÑ `[period]` Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ

3. **ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†**
   - ĞšĞ°Ğ¶Ğ´Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¸Ğ¼ĞµĞµÑ‚ ÑĞ²Ğ¾Ğ¹ `useEffect`
   - Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ÑÑ‚ÑÑ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğµ

#### ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:

**Ğ¤Ğ°Ğ¹Ğ»:** `server/cache/cacheManager.ts`

| Ğ¢Ğ¸Ğ¿ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… | TTL | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------------|-----|----------|
| Yandex Orders | 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ§Ğ°ÑÑ‚Ğ¾ Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ |
| Yandex Products | 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ ĞµĞ´ĞºĞ¾ Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ |
| Yandex Campaigns | 60 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ |
| Yandex Stocks | 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° |
| VK Campaigns | 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° |
| VK Statistics | 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ§Ğ°ÑÑ‚Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑÑ‚ÑÑ |
| VK Ad Groups | 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° |
| VK Banners | 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° |

**ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ°:**
- Ğ£ÑÑ‚Ğ°Ñ€ĞµĞ²ÑˆĞ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ ÑƒĞ´Ğ°Ğ»ÑÑÑ‚ÑÑ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
- ĞŸÑ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞµ ĞºÑÑˆĞ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑƒĞ´Ğ°Ğ»ÑÑÑ‚ÑÑ Ğ¸ÑÑ‚ĞµĞºÑˆĞ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸

### 5.2 ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² VK

**Ğ¤Ğ°Ğ¹Ğ»:** `server/utils/vkTokenManager.ts`

```typescript
export async function ensureValidToken(): Promise<string | null> {
  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºÑÑˆĞ° Ñ‚Ğ¾ĞºĞµĞ½Ğ°
  if (!tokenCache) {
    tokenCache = loadTokens();
  }

  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ€Ğ¾ĞºĞ° Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (Ñ Ğ·Ğ°Ğ¿Ğ°ÑĞ¾Ğ¼ 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
  const now = Date.now();
  const timeUntilExpiry = tokenCache.expires_at - now;
  const thirtyMinutes = 30 * 60 * 1000;

  if (timeUntilExpiry > thirtyMinutes) {
    // Ğ¢Ğ¾ĞºĞµĞ½ ĞµÑ‰Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ĞµĞ½
    return tokenCache.access_token;
  }

  // Ğ¢Ğ¾ĞºĞµĞ½ Ğ¸ÑÑ‚ĞµĞºĞ°ĞµÑ‚ - Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼
  const newTokens = await refreshAccessToken(tokenCache.refresh_token);
  
  if (!newTokens) {
    // Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½, Ğ¼Ğ¾Ğ¶ĞµÑ‚ ĞµÑ‰Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
    return tokenCache.access_token;
  }

  return newTokens.access_token;
}
```

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ:**
1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ€Ğ¾ĞºĞ° Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ´ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ¼
2. Ğ•ÑĞ»Ğ¸ Ñ‚Ğ¾ĞºĞµĞ½ Ğ¸ÑÑ‚ĞµĞºĞ°ĞµÑ‚ Ğ² Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğµ 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚ - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
3. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ `refresh_token` Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ `access_token`
4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ğ² `.env` Ñ„Ğ°Ğ¹Ğ»
5. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ `process.env` Ğ¸ ĞºÑÑˆĞ° Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²

---

## 6. Ğ¤ĞĞ ĞœĞ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ”ĞĞĞĞ«Ğ¥ ĞŸĞ ĞŸĞ•Ğ Ğ˜ĞĞ”ĞĞœ

### 6.1 ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ñ‹

**Ğ¤Ğ°Ğ¹Ğ»:** `client/services/dataService.ts` â†’ `getPeriodParams()`

| ĞŸĞµÑ€Ğ¸Ğ¾Ğ´ | ĞšĞ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° |
|--------|-----|----------|---------|
| 7 Ğ´Ğ½ĞµĞ¹ | `7d` | ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 7 Ğ´Ğ½ĞµĞ¹ | `today - 7 days` |
| 30 Ğ´Ğ½ĞµĞ¹ | `30d` | ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 30 Ğ´Ğ½ĞµĞ¹ | `today - 30 days` |
| 90 Ğ´Ğ½ĞµĞ¹ | `90d` | ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 90 Ğ´Ğ½ĞµĞ¹ | `today - 90 days` |
| Ğ¡ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ³Ğ¾Ğ´Ğ° | `ytd` | Year to Date | `January 1` â†’ `today` |

### 6.2 Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¾Ğ²

```typescript
export function getPeriodParams(period: string): PeriodParams {
  const today = new Date();
  const from = new Date();

  switch (period) {
    case "7d":
      from.setDate(today.getDate() - 7);
      break;
    case "30d":
      from.setDate(today.getDate() - 30);
      break;
    case "90d":
      from.setDate(today.getDate() - 90);
      break;
    case "ytd":
      from.setMonth(0);  // Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒ (0-indexed)
      from.setDate(1);   // 1-Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾
      break;
    default:
      from.setDate(today.getDate() - 30);
  }

  return {
    from: from.toISOString().split("T")[0],  // YYYY-MM-DD
    to: today.toISOString().split("T")[0],   // YYYY-MM-DD
  };
}
```

### 6.3 ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¼ĞµÑÑÑ†Ğ°Ğ¼ Ğ¸ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»Ğ°Ğ¼

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** ĞŸĞµÑ€Ğ¸Ğ¾Ğ´Ñ‹ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ ĞºĞ°Ğº Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ñ‹ Ğ´Ğ°Ñ‚, Ğ½Ğ¾ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¼ĞµÑÑÑ†Ğ°Ğ¼/ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»Ğ°Ğ¼ Ğ½Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ API.

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**

```typescript
// ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¼ĞµÑÑÑ†Ğ°Ğ¼
function groupByMonth(orders: Order[]): Record<string, Order[]> {
  const grouped: Record<string, Order[]> = {};
  
  orders.forEach(order => {
    const date = new Date(order.creation_date);
    const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
    
    if (!grouped[monthKey]) {
      grouped[monthKey] = [];
    }
    grouped[monthKey].push(order);
  });
  
  return grouped;
}

// ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»Ğ°Ğ¼
function groupByQuarter(orders: Order[]): Record<string, Order[]> {
  const grouped: Record<string, Order[]> = {};
  
  orders.forEach(order => {
    const date = new Date(order.creation_date);
    const quarter = Math.floor(date.getMonth() / 3) + 1;
    const quarterKey = `${date.getFullYear()}-Q${quarter}`;
    
    if (!grouped[quarterKey]) {
      grouped[quarterKey] = [];
    }
    grouped[quarterKey].push(order);
  });
  
  return grouped;
}
```

### 6.4 ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞ¸

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ğ¾:

```typescript
const calculateChange = (current: number): number => {
  // Ğ£Ğ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚ - ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ°Ñ Ğ²Ğ°Ñ€Ğ¸Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ´ĞµĞ¼Ğ¾
  return parseFloat((Math.random() * 15 - 5).toFixed(1));
};
```

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**

```typescript
// Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¼ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¾Ğ¼
async function getDashboardSummaryWithComparison(
  currentPeriod: string,
  previousPeriod: string
): Promise<DashboardSummaryWithComparison> {
  const [current, previous] = await Promise.all([
    getDashboardSummary(currentPeriod),
    getDashboardSummary(previousPeriod),
  ]);

  return {
    current,
    previous,
    changes: {
      revenue: calculatePercentChange(
        current.metrics.total_revenue,
        previous.metrics.total_revenue
      ),
      orders: calculatePercentChange(
        current.metrics.total_orders,
        previous.metrics.total_orders
      ),
      roas: calculatePercentChange(
        current.metrics.roas,
        previous.metrics.roas
      ),
    },
  };
}

function calculatePercentChange(current: number, previous: number): number {
  if (previous === 0) return current > 0 ? 100 : 0;
  return ((current - previous) / previous) * 100;
}
```

---

## 7. ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞĞ Ğ”Ğ£Ğ‘Ğ›Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ”ĞĞĞĞ«Ğ¥

### 7.1 Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ĞºÑÑˆ

**Ğ¤Ğ°Ğ¹Ğ»:** `server/cache/cacheManager.ts`

**ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼:**
1. ĞšĞ»ÑÑ‡Ğ¸ ĞºÑÑˆĞ° Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ñ ÑƒÑ‡ĞµÑ‚Ğ¾Ğ¼ **Ğ²ÑĞµÑ… Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²** Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
2. ĞŸĞµÑ€ĞµĞ´ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ¼ Ğº API Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ÑÑ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² ĞºÑÑˆĞµ
3. Ğ•ÑĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞµÑÑ‚ÑŒ Ğ¸ Ğ½Ğµ Ğ¸ÑÑ‚ĞµĞºĞ»Ğ¸ - Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ÑÑ‚ÑÑ Ğ¸Ğ· ĞºÑÑˆĞ°
4. Ğ•ÑĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½ĞµÑ‚ - Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº API Ğ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**
```typescript
// Yandex Orders
const cacheKey = `yandex:orders:all:${date_from}:${date_to}`;
const cachedData = cacheManager.get<any[]>(cacheKey);

if (cachedData) {
  console.log(`âœ… Cache HIT: ${cacheKey}`);
  return res.json({
    success: true,
    data: cachedData,
    cached: true,
  });
}

// Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ² ĞºÑÑˆĞµ - Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº API
const allOrders = await fetchOrdersFromAPI();
cacheManager.set(cacheKey, allOrders, CACHE_TTL.YANDEX_ORDERS);
```

### 7.2 Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸

**Ğ¤Ğ°Ğ¹Ğ»:** `server/routes/yandex.ts` â†’ `getOrders()`

ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹:

```typescript
// Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹ ÑĞ¾ Ğ²ÑĞµÑ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹
const allOrders: any[] = [];
const campaignIds = getYandexCampaignIds();

for (const campaignId of campaignIds) {
  let page = 1;
  let hasMore = true;
  
  // ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ: Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ²ÑĞµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
  while (hasMore && page <= 5) {
    const data = await yandexFetch(`/campaigns/${campaignId}/orders?page=${page}`);
    
    if (data.orders && data.orders.length > 0) {
      // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ campaignId Ğº ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ Ğ·Ğ°ĞºĞ°Ğ·Ñƒ Ğ´Ğ»Ñ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
      data.orders.forEach(order => {
        allOrders.push({
          ...order,
          campaignId: campaignId,
        });
      });
      
      // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞµÑÑ‚ÑŒ Ğ»Ğ¸ ĞµÑ‰Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
      if (data.pager && page < data.pager.pagesCount) {
        page++;
      } else {
        hasMore = false;
      }
    } else {
      hasMore = false;
    }
  }
}
```

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°ĞºĞ°Ğ· Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ `campaignId` Ğ´Ğ»Ñ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°, Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹.

### 7.3 Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²

**Ğ¤Ğ°Ğ¹Ğ»:** `client/services/dataService.ts` â†’ `getTopProducts()`

```typescript
// Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ offerId (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°)
const productStats: Record<string, ProductStats> = {};

orders.forEach((order) => {
  order.items.forEach((item) => {
    const offerId = item.offerId || item.shopSku;
    
    if (!productStats[offerId]) {
      // Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
      productStats[offerId] = {
        name: item.offerName || offerId,
        orders: 0,
        quantity: 0,
        revenue: 0,
      };
    }
    
    // ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ÑÑƒĞ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ° Ğ½Ğµ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
    productStats[offerId].orders += 1;
    productStats[offerId].quantity += item.count || 1;
    productStats[offerId].revenue += (item.buyerPrice || 0) * (item.count || 1);
  });
});
```

**ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼:** Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ `Record<string, ProductStats>` Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚, Ñ‡Ñ‚Ğ¾ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‚Ğ¾Ğ²Ğ°Ñ€ (Ğ¿Ğ¾ `offerId`) Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·, Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€ÑƒÑÑ‚ÑÑ.

### 7.4 Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

**Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ID Ğ·Ğ°ĞºĞ°Ğ·Ğ°:**
```typescript
// Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ² Ğ¿Ğ¾ ID Ğ·Ğ°ĞºĞ°Ğ·Ğ°
function deduplicateOrders(orders: Order[]): Order[] {
  const seen = new Set<number>();
  return orders.filter(order => {
    if (seen.has(order.id)) {
      return false; // Ğ”ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚
    }
    seen.add(order.id);
    return true;
  });
}
```

**Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ĞµĞ¹:**
```typescript
// Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ĞµĞ¹
function deduplicateByFields<T>(
  items: T[],
  keyFields: (keyof T)[]
): T[] {
  const seen = new Set<string>();
  return items.filter(item => {
    const key = keyFields.map(field => item[field]).join('|');
    if (seen.has(key)) {
      return false;
    }
    seen.add(key);
    return true;
  });
}
```

---

## 8. Ğ›ĞĞ“Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ˜ ĞĞĞĞ›Ğ˜Ğ¢Ğ˜ĞšĞ

### 8.1 Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

**Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
- `console.log()` - Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
- `console.warn()` - Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ
- `console.error()` - Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸

**ĞœĞµÑÑ‚Ğ° Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**

#### Backend (server/)

**Ğ¤Ğ°Ğ¹Ğ»:** `server/routes/yandex.ts`
```typescript
console.log(`âœ… Yandex: Ğ²ÑĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ ${allOrders.length} Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²`);
console.log(`âœ… Cache HIT: ${cacheKey}`);
console.log(`âŒ Cache MISS: ${cacheKey}`);
console.warn("Yandex token missing - using mock data");
console.error("Yandex getOrders error:", error);
```

**Ğ¤Ğ°Ğ¹Ğ»:** `server/routes/vk.ts`
```typescript
console.log(`âœ… VK Campaigns: Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ ${campaigns.length} ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹`);
console.log(`âœ… Cache HIT: ${cacheKey}`);
console.log(`ğŸ’¾ Cached VK Statistics: ${cacheKey}`);
```

**Ğ¤Ğ°Ğ¹Ğ»:** `server/cache/cacheManager.ts`
```typescript
console.log('ğŸ—„ï¸  Cache Manager initialized');
console.log(`ğŸ§¹ Cache cleanup: ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¾ ${cleaned} ÑƒÑÑ‚Ğ°Ñ€ĞµĞ²ÑˆĞ¸Ñ… Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹`);
console.log(`ğŸ—‘ï¸  Deleted ${deleted} cache entries matching "${pattern}"`);
```

**Ğ¤Ğ°Ğ¹Ğ»:** `server/utils/vkTokenManager.ts`
```typescript
console.log('ğŸ”„ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ VK Ñ‚Ğ¾ĞºĞµĞ½Ğ° Ñ‡ĞµÑ€ĞµĞ· refresh_token...');
console.log('âœ… VK Ñ‚Ğ¾ĞºĞµĞ½ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½');
console.warn('âš ï¸ VK Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹ Ğ² .env');
```

#### Frontend (client/)

**Ğ¤Ğ°Ğ¹Ğ»:** `client/services/dataService.ts`
```typescript
console.log(`âœ… Dashboard: ${totalOrders} Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ², ${totalRevenue}â‚½ Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ°`);
console.log(`âœ… VK Campaigns: Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ ${campaigns.length} ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹`);
console.log(`âœ… Orders: Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ ${orders.length} Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²`);
console.log(`âœ… Top Products: ${topProducts.length} Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²`);
console.warn("VK Statistics Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ½ÑƒĞ»Ğ¸:", error);
console.error("Error fetching dashboard summary, using mock data:", error);
```

### 8.2 Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ĞºÑÑˆĞ°

**Ğ¤Ğ°Ğ¹Ğ»:** `server/cache/cacheManager.ts` â†’ `getStats()`

```typescript
getStats() {
  return {
    totalEntries: this.cache.size,        // Ğ’ÑĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹
    hits: this.stats.hits,                // ĞŸĞ¾Ğ¿Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¹ Ğ² ĞºÑÑˆ
    misses: this.stats.misses,            // ĞŸÑ€Ğ¾Ğ¼Ğ°Ñ…Ğ¾Ğ²
    hitRate: "85.5%",                     // ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¹
    sets: this.stats.sets,                // Ğ—Ğ°Ğ¿Ğ¸ÑĞµĞ¹ Ğ² ĞºÑÑˆ
    deletes: this.stats.deletes,          // Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğ¹
    oldestEntry: timestamp,               // Ğ¡Ğ°Ğ¼Ğ°Ñ ÑÑ‚Ğ°Ñ€Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ
    newestEntry: timestamp,               // Ğ¡Ğ°Ğ¼Ğ°Ñ Ğ½Ğ¾Ğ²Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ
    memoryUsage: "2.5 MB",                // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
  };
}
```

### 8.3 Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸

#### 1. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ:**
- `winston` (Node.js)
- `pino` (Node.js, Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹)
- `log4js` (Node.js)

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¾Ğ³Ğ°:**
```typescript
logger.info('API request', {
  endpoint: '/api/yandex/orders',
  method: 'GET',
  params: { date_from: '2025-01-01', date_to: '2025-01-31' },
  duration: 1250, // ms
  cacheHit: true,
  recordsCount: 150,
  userId: 'user123',
  timestamp: new Date().toISOString(),
});
```

#### 2. Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ„Ğ°Ğ¹Ğ»Ñ‹

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:**
```
logs/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ yandex-2025-12-05.log
â”‚   â”œâ”€â”€ vk-2025-12-05.log
â”‚   â””â”€â”€ errors-2025-12-05.log
â”œâ”€â”€ cache/
â”‚   â””â”€â”€ cache-2025-12-05.log
â”œâ”€â”€ analytics/
â”‚   â””â”€â”€ events-2025-12-05.log
â””â”€â”€ access/
    â””â”€â”€ access-2025-12-05.log
```

#### 3. ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ:**

```typescript
interface AnalyticsEvent {
  event: string;              // 'api_request', 'cache_hit', 'error'
  source: string;             // 'yandex', 'vk', 'cache'
  endpoint?: string;          // '/api/yandex/orders'
  duration?: number;           // Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ (ms)
  cacheHit?: boolean;         // ĞŸĞ¾Ğ¿Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ² ĞºÑÑˆ
  recordsCount?: number;      // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹
  error?: string;             // Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ
  userId?: string;            // ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
  timestamp: string;          // ISO timestamp
  metadata?: Record<string, any>; // Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹:**
```typescript
// API Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
{
  event: 'api_request',
  source: 'yandex',
  endpoint: '/api/yandex/orders',
  duration: 1250,
  cacheHit: false,
  recordsCount: 150,
  timestamp: '2025-12-05T10:30:00Z'
}

// ĞŸĞ¾Ğ¿Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ² ĞºÑÑˆ
{
  event: 'cache_hit',
  source: 'cache',
  cacheKey: 'yandex:orders:all:2025-01-01:2025-01-31',
  duration: 5,
  recordsCount: 150,
  timestamp: '2025-12-05T10:31:00Z'
}

// ĞÑˆĞ¸Ğ±ĞºĞ°
{
  event: 'error',
  source: 'vk',
  endpoint: '/api/vk/statistics',
  error: 'VK API Error: 401 Unauthorized',
  timestamp: '2025-12-05T10:32:00Z'
}
```

#### 4. ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğµ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸:**

```typescript
// Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° API
const avgResponseTime = events
  .filter(e => e.event === 'api_request')
  .reduce((sum, e) => sum + (e.duration || 0), 0) / events.length;

// ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¹ Ğ² ĞºÑÑˆ
const cacheHitRate = events
  .filter(e => e.cacheHit === true).length / 
  events.filter(e => e.event === 'api_request').length * 100;

// ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¿Ğ¾ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼
const errorsBySource = events
  .filter(e => e.event === 'error')
  .reduce((acc, e) => {
    acc[e.source] = (acc[e.source] || 0) + 1;
    return acc;
  }, {});

// Ğ¢Ğ¾Ğ¿ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ñ… endpoints
const topEndpoints = events
  .filter(e => e.endpoint)
  .reduce((acc, e) => {
    acc[e.endpoint!] = (acc[e.endpoint!] || 0) + 1;
    return acc;
  }, {});
```

#### 5. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼Ğ¸

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹:**
- **Google Analytics** - Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
- **Mixpanel** - Ğ´Ğ»Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹Ğ½Ğ¾Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸
- **Amplitude** - Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸
- **Sentry** - Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- **DataDog** - Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

#### 6. Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ‘Ğ”:**

```sql
CREATE TABLE analytics_events (
  id SERIAL PRIMARY KEY,
  event_type VARCHAR(50) NOT NULL,
  source VARCHAR(50),
  endpoint VARCHAR(255),
  duration INTEGER,
  cache_hit BOOLEAN,
  records_count INTEGER,
  error_message TEXT,
  user_id VARCHAR(100),
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_analytics_event_type ON analytics_events(event_type);
CREATE INDEX idx_analytics_source ON analytics_events(source);
CREATE INDEX idx_analytics_created_at ON analytics_events(created_at);
CREATE INDEX idx_analytics_user_id ON analytics_events(user_id);
```

---

## ğŸ“ Ğ Ğ•Ğ—Ğ®ĞœĞ•

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹:

1. **Ğ Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³:** Ğ”Ğ²ÑƒÑ…ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (Frontend â†’ Backend â†’ External API)
2. **ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** In-memory ĞºÑÑˆ Ñ TTL Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ¾Ğ¹
3. **Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ:** Ğ§ĞµÑ€ĞµĞ· ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ»ÑÑ‡Ğ¸ ĞºÑÑˆĞ° Ğ¸ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
4. **Ğ Ğ°ÑÑ‡ĞµÑ‚Ñ‹:** Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (ROAS, CTR, CPC, AOV)
5. **ĞŸĞµÑ€Ğ¸Ğ¾Ğ´Ñ‹:** ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° 7Ğ´, 30Ğ´, 90Ğ´, YTD
6. **Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²:** ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ° Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Excel/CSV
7. **Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· console, Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ Ğº Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
8. **Ğ¢Ğ¾ĞºĞµĞ½Ñ‹:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ VK Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²

### Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ:

1. **ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¼ĞµÑÑÑ†Ğ°Ğ¼/ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»Ğ°Ğ¼** - Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
2. **Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¾Ğ²** - Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€Ğ°ÑÑ‡ĞµÑ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°
3. **Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** - Ğ²Ğ½ĞµĞ´Ñ€Ğ¸Ñ‚ÑŒ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
4. **ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ‘Ğ”** - ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹
5. **ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸** - Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° API
6. **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¾Ğ¹** - Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 2.0  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾

