# üìä –û—Ç—á–µ—Ç –æ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö VK Ads API

**–î–∞—Ç–∞ —Å–±–æ—Ä–∞:** 15 –æ–∫—Ç—è–±—Ä—è 2025  
**API:** VK Ads API v2 (ads.vk.com)

---

## ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 1. **ad_plans.json** (3.4 KB)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤
- **–ù–∞–π–¥–µ–Ω–æ:** 19 —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤
- **–°–æ–¥–µ—Ä–∂–∏—Ç:**
  - ID –∫–∞–±–∏–Ω–µ—Ç–∞
  - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–∞
  - –°—Ç–∞—Ç—É—Å

**–ü—Ä–∏–º–µ—Ä—ã –∫–∞–±–∏–Ω–µ—Ç–æ–≤:**
- –†–µ–∫–ª–∞–º–∞ –Ω–∞ –∫—É—Ö–Ω–∏ / –≤—Å–µ –≥–æ—Ä–æ–¥–∞
- –∫–æ—Ä–ø—É—Å–Ω–∞—è –º–µ–±–µ–ª—å / –ø–æ –≥–æ—Ä–æ–¥–∞–º
- –ö—É—Ö–Ω–∏ –≤—Å–µ –≥–æ—Ä–æ–¥–∞
- –î–∏–≤–∞–Ω—ã –≤—Å–µ –≥–æ—Ä–æ–¥–∞

### 2. **ad_plan_current.json** (0.2 KB)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —Ä–µ–∫–ª–∞–º–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
- **Account ID:** 8798776
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** –†–µ–∫–ª–∞–º–∞ –Ω–∞ –∫—É—Ö–Ω–∏ / –≤—Å–µ –≥–æ—Ä–æ–¥–∞

### 3. **campaigns.json** (2.1 KB)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
- **–ù–∞–π–¥–µ–Ω–æ:** 55 –∫–∞–º–ø–∞–Ω–∏–π (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 20 –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏)
- **–°–æ–¥–µ—Ä–∂–∏—Ç:**
  - ID –∫–∞–º–ø–∞–Ω–∏–∏
  - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏
  - Package ID

**–ü—Ä–∏–º–µ—Ä—ã –∫–∞–º–ø–∞–Ω–∏–π:**
- —à–∏—Ä–æ–∫–∞—è
- –æ—Ä–µ—Ö–æ–≤–æ –∑—É–µ–≤–æ
- —à–∞—Ç—É—Ä–∞ / —Å–ª–æ–±–æ–¥–∞
- –ï–≥–æ—Ä—å–µ–≤—Å–∫

### 4. **ad_groups.json** (20.7 KB)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ì—Ä—É–ø–ø—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- **–ù–∞–π–¥–µ–Ω–æ:** 200 –≥—Ä—É–ø–ø –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- **–°–æ–¥–µ—Ä–∂–∏—Ç:**
  - ID –≥—Ä—É–ø–ø—ã
  - –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
  - –°–≤—è–∑—å —Å –∫–∞–º–ø–∞–Ω–∏—è–º–∏
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞

---

## ‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å

–°–ª–µ–¥—É—é—â–∏–µ endpoints –≤–µ—Ä–Ω—É–ª–∏ –æ—à–∏–±–∫—É 404 (Not Found):

1. **–û–±—ä—è–≤–ª–µ–Ω–∏—è (ads)** - –≤–æ–∑–º–æ–∂–Ω–æ, –∫–∞–º–ø–∞–Ω–∏–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
3. **–ê—É–¥–∏—Ç–æ—Ä–∏–∏** - –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞—É–¥–∏—Ç–æ—Ä–∏–∏
4. **–ü–∏–∫—Å–µ–ª–∏** - –≤–æ–∑–º–æ–∂–Ω–æ, –ø–∏–∫—Å–µ–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–ü—Ä–∏—á–∏–Ω—ã:**
- API endpoint –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏
- –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
- –¢—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

---

## üìà –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Power BI

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö:

```
–§–∞–∫—Ç—ã (Fact Tables):
‚îú‚îÄ‚îÄ campaigns - –∫–∞–º–ø–∞–Ω–∏–∏ (–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
‚îú‚îÄ‚îÄ ad_groups - –≥—Ä—É–ø–ø—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ (–±—É–¥—É—â–µ–µ) statistics - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ò–∑–º–µ—Ä–µ–Ω–∏—è (Dimensions):
‚îú‚îÄ‚îÄ ad_plans - —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã
‚îî‚îÄ‚îÄ (–±—É–¥—É—â–µ–µ) dates - –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏:

```
ad_plans (id) ‚Üê‚Üí campaigns (package_id)
campaigns (id) ‚Üê‚Üí ad_groups (campaign_id)
```

---

## üöÄ –ò–º–ø–æ—Ä—Ç –≤ Power BI Desktop

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç campaigns.json

1. –û—Ç–∫—Ä–æ–π—Ç–µ Power BI Desktop
2. **–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** ‚Üí **JSON**
3. –í—ã–±–µ—Ä–∏—Ç–µ `vk_data/campaigns.json`
4. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ Power Query:
   ```
   - –ù–∞–∂–º–∏—Ç–µ "To Table" –Ω–∞ —Å—Ç–æ–ª–±—Ü–µ List
   - Expand ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—è: id, name, package_id
   - –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ "Campaigns"
   - –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:
     * id ‚Üí Whole Number
     * name ‚Üí Text
     * package_id ‚Üí Whole Number
   ```

### –®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç ad_groups.json

1. **–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** ‚Üí **JSON**
2. –í—ã–±–µ—Ä–∏—Ç–µ `vk_data/ad_groups.json`
3. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ Power Query:
   ```
   - Expand "items" record
   - –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
   - –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ "Ad_Groups"
   ```

### –®–∞–≥ 3: –ò–º–ø–æ—Ä—Ç ad_plans.json

1. **–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** ‚Üí **JSON**
2. –í—ã–±–µ—Ä–∏—Ç–µ `vk_data/ad_plans.json`
3. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª—è

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π

–í Model View —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤—è–∑–∏:
```
ad_plans[id] ‚Üí campaigns[package_id]
campaigns[id] ‚Üí ad_groups[campaign_id]
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π

### Dashboard 1: –û–±–∑–æ—Ä –∫–∞–º–ø–∞–Ω–∏–π

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **Card**: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–º–ø–∞–Ω–∏–π
2. **Table**: –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
3. **Bar Chart**: –ö–∞–º–ø–∞–Ω–∏–∏ –ø–æ package_id

**DAX –º–µ—Ä—ã:**
```DAX
Total_Campaigns = COUNT(Campaigns[id])
Total_Ad_Groups = COUNT(Ad_Groups[id])
Avg_Groups_Per_Campaign = DIVIDE([Total_Ad_Groups], [Total_Campaigns], 0)
```

### Dashboard 2: –ê–Ω–∞–ª–∏–∑ –≥—Ä—É–ø–ø –æ–±—ä—è–≤–ª–µ–Ω–∏–π

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **Treemap**: –ì—Ä—É–ø–ø—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ –∫–∞–º–ø–∞–Ω–∏—è–º
2. **Matrix**: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–º–ø–∞–Ω–∏—è–º –∏ –≥—Ä—É–ø–ø–∞–º
3. **Slicer**: –§–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–∞–º–ø–∞–Ω–∏–∏

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd "/Users/rostislavgolivetc/API test"
python3 collect_vk_data_v2.py
```

–ó–∞—Ç–µ–º –≤ Power BI: **–ì–ª–∞–≤–Ω–∞—è** ‚Üí **–û–±–Ω–æ–≤–∏—Ç—å**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (macOS)

–°–æ–∑–¥–∞–π—Ç–µ cron job:

```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 6:00):

```
0 6 * * * cd "/Users/rostislavgolivetc/API test" && /usr/bin/python3 collect_vk_data_v2.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Power BI Service + Gateway

1. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –æ—Ç—á–µ—Ç –≤ Power BI Service
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Power BI Gateway –Ω–∞ –≤–∞—à–µ–º Mac
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ Power BI Service

---

## üîç –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω—É–∂–Ω–æ:
- –ò–∑—É—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é VK Ads API v2
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å endpoints –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –í–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã API

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–±—Ä–∞—Ç—å:
- –ë—é–¥–∂–µ—Ç—ã –∫–∞–º–ø–∞–Ω–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞
- –ö—Ä–µ–∞—Ç–∏–≤—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

- Yandex Market (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–∞)
- Google Analytics
- CRM —Å–∏—Å—Ç–µ–º—ã

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã:**
- `collect_vk_data_v2.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- `vk_ads_api_v2.py` - –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å VK Ads API v2
- `get_vk_access_token.py` - –ø–æ–ª—É—á–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞ (24 —á–∞—Å–∞)
2. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω: `python3 get_vk_access_token.py`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `python3 test_connection.py`

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 15 –æ–∫—Ç—è–±—Ä—è 2025

